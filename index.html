<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>DGL vs iMedDoc Comparison</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- ✅ Load React and ReactDOM first -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

    <!-- Tabletop.js for Google Sheets -->
    <script src="https://unpkg.com/tabletop@1.5.3/tabletop.js"></script>

    <!-- TailwindCSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body class="bg-gray-50">
    <div id="root" class="p-6"></div>

    <!-- ✅ Your React app script goes at the end -->
    <script type="text/javascript">
      const e = React.createElement;

      function App() {
        const [data, setData] = React.useState([]);
        const [loading, setLoading] = React.useState(true);

        React.useEffect(() => {
          Tabletop.init({
            key: "1OzYkdWdGyNmuw7HzKrtW8JfmhJdABUb62R3NOssiB58",
            simpleSheet: true,
            callback: function (data) {
              setData(data);
              setLoading(false);
            }
          });
        }, []);

        if (loading) return e("div", {}, "Loading...");

        return e("div", { className: "max-w-6xl mx-auto" }, [
          e("h1", { className: "text-3xl font-bold mb-4" }, "Feature Comparison: DGL vs iMedDoc"),
          e("div", { className: "overflow-auto" }, [
            e("table", { className: "min-w-full bg-white border border-gray-300" }, [
              e("thead", {}, e("tr", { className: "bg-gray-100" }, [
                "Category", "Feature", "DGL", "iMedDoc", "Notes"
              ].map((text, i) =>
                e("th", { key: i, className: "p-3 border text-left" }, text)
              ))),
              e("tbody", {}, data.map((row, i) =>
                e("tr", { key: i, className: "border-t" }, [
                  row.Category,
                  row.Feature,
                  row.DGL === "✓" ? "✅" : row.DGL === "✗" ? "❌" : row.DGL,
                  row.iMedDoc === "✓" ? "✅" : row.iMedDoc === "✗" ? "❌" : row.iMedDoc,
                  row.Notes
                ].map((val, j) =>
                  e("td", { key: j, className: "p-3 border" }, val)
                ))
              ))
            ])
          ])
        ]);
      }

      document.addEventListener("DOMContentLoaded", function () {
        ReactDOM.createRoot(document.getElementById("root")).render(e(App));
      });
    </script>
  </body>
</html>
